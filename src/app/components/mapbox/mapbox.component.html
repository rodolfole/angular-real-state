<mgl-map class="h-full w-full" [style]="style" [zoom]="zoom" [center]="center" [attributionControl]="false"
    [minZoom]="1">

    <mgl-control mglGeolocate></mgl-control>
    <mgl-control mglNavigation [showCompass]="false"></mgl-control>

    <mgl-geojson-source #clusterComponent id="listings-tags" [cluster]="true" [clusterRadius]="80" [clusterMaxZoom]="24"
        [data]="data">
    </mgl-geojson-source>

    <mgl-markers-for-clusters source="listings-tags">
        <ng-template #myMarker mglPoint let-feature>
            <div (click)="handleClickSecondary(feature)" class="marker">
                <button class="
                    rounded-full 
                    bg-white 
                    text-slate-950 
                    font-semibold 
                    text-base
                    flex
                    items-center
                    justify-center
                    py-1
                    px-2
                    shadow-md
                    gap-1
                    ">
                    <span>${{feature.properties.price}}</span>
                    <span class="text-sm">MXN</span>
                </button>
            </div>
        </ng-template>
        <ng-template mglClusterPoint let-feature>
            <div (click)="handleClick(feature)" class="marker-cluster">
                <button class="
                    rounded-full 
                    bg-white 
                    text-slate-950 
                    font-semibold 
                    text-base
                    flex
                    items-center
                    justify-center
                    py-1
                    px-2
                    shadow-md
                    gap-1
                    ">
                    <span>${{feature.properties?.point_count}}</span>
                    <span class="text-sm">MXN</span>
                </button>
            </div>
        </ng-template>
    </mgl-markers-for-clusters>

    <!-- <mgl-marker #myMarker [lngLat]="[-74.5, 40]">
        <div (click)="null" class="marker">
            <button class="
            rounded-full 
            bg-white 
            text-slate-950 
            font-semibold 
            text-base
            flex
            items-center
            justify-center
            py-1
            px-2
            shadow-md
            gap-1
            ">
                <span>${{listing.price}}</span>
                <span class="text-sm">MXN</span>
            </button>
        </div>
    </mgl-marker> -->

    <!-- <mgl-popup [marker]="myMarker" [closeButton]="true" (closeOnClick)="false" [closeOnMove]="false"
        [focusAfterOpen]="false" className="!max-w-[320px]" [offset]="10">
        <app-listing-card [data]="listing" [showDetails]="false"></app-listing-card>
    </mgl-popup> -->

</mgl-map>