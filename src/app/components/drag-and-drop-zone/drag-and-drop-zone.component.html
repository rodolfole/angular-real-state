<ngx-dropzone (change)="handleOnSelect($event)" [ngClass]="[zoneClasses, files.length ? '!border-none' : '']"
    [multiple]="multiple" [accept]="accept" [maxFileSize]="maxFileSize" [disabled]="disabled" [expandable]="expandable"
    [disableClick]="disableClick" [processDirectoryDrop]="processDirectoryDrop">

    <ngx-dropzone-label>
        <span class="flex flex-col gap-2 items-center">
            <i class="far fa-images mb-1 text-6xl"></i>
            <h3 class="text-gray-900 font-bold text-xl">
                Drag the photos here
            </h3>
            <span class="text-neutral-500 text-base">
                Choose at least 5 photos
            </span>
            <button class="text-base underline font-semibold mt-1 pointer-events-none text-gray-800">
                Upload photos from your device
            </button>
        </span>
    </ngx-dropzone-label>

    <ngx-dropzone-preview class="!bg-gradient-to-r from-neutral-50 to-neutral-50 !p-0" *ngFor="let file of files"
        [removable]="true" [file]="file.filePreview" (removed)="hanleOnRemove(file.filePreview)">

        <ngx-dropzone-label *ngIf="file.state && file.state !== 'DONE'" class="
            absolute
            left-2
            top-2
            h-12
            w-12
            flex
            items-center
            justify-center
            gap-1
            float-left
            rounded-full
            !m-0
            z-50" style="background: conic-gradient(rgb(29, 29, 29) var(--percentage), white 0deg);"
            [ngStyle]="{'--percentage': (file.progress! * 3.6) + 'deg'}">
            <span class="
                bg-white
                text-brown-950 
                rounded-full 
                text-sm
                inset-0
                m-1
                cursor-default
                absolute
                flex
                items-center
                justify-center">
                {{file.progress}}
                <span class="align-super text-[10px]">%</span>
            </span>
        </ngx-dropzone-label>

        <ngx-dropzone-label class="flex items-center justify-center w-full h-full !m-0">
            <img class="w-auto h-full" [src]="file.file?.url || (file.filePreview | base64Image | async)"
                [alt]="file.index" width="200" height="300">
        </ngx-dropzone-label>

    </ngx-dropzone-preview>

    <div *ngIf="files.length" class="
        pointer-events-none 
        border 
        border-dashed
        border-gray-300 
        rounded-md flex 
        flex-1 
        flex-col
        items-center
        justify-center
        max-w-[50%] 
        w-full
        h-[228px]
        overflow-clip
        min-w-[250px]
        hover:border-solid
        hover:border-black
        ">
        <i class="fas fa-plus text-4xl"></i>
        <span class="text-base font-medium">Add more</span>
    </div>
</ngx-dropzone>